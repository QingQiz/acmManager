@using acmManager.File
@using acmManager.Web.Controllers
@inject FileAppService FileAppService;
@model acmManager.Web.Models.Users.MainPageViewModel

@section styles
{
    @* chart js *@
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.css" integrity="sha512-/zs32ZEJh+/EO2N1b0PEdoA10JkdC3zJ8L5FTiQu82LR9S/rOQNfQN7U59U9BC12swNeRAz3HSzIL2vpp4fv3w==" crossorigin="anonymous" />
    
    <link href="~/view-resources/Views/Users/MainPage.css" rel="stylesheet"/>
    <environment include="Development">
        <link href="~/view-resources/Views/Users/Profile.css" rel="stylesheet"/>
    </environment>
    
    <environment exclude="Development">
        <link href="~/view-resources/Views/_Bundles/user.profile.min.css" rel="stylesheet"/>
    </environment>
}

@section scripts
{
    @* chart js *@
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.bundle.min.js" integrity="sha512-SuxO9djzjML6b9w9/I07IWnLnQhgyYVSpHZx0JV97kGBfTIsUYlWflyuW4ypnvhBrslz1yJ3R+S14fdCWmSmSA==" crossorigin="anonymous"></script>@using System.Globalization
    
    <environment include="Development">
        <script src="~/view-resources/Views/Users/MainPage.js"></script>
    </environment>
    
    <environment exclude="Development">
        <script src="~/view-resources/Views/_Bundles/user.main.page.min.js"></script>
    </environment>
}

@{
    ViewBag.Title = "Main Page: " + Model.UserInfo.StudentNumber;
    var userPhoto = (await FileAppService.GetUserPhotoAsync(Model.UserId))?.FilePath ?? UserController.DefaultUserPhoto;
}

<div class="content-container">
    <div class="container mt-5">
        <div class="row justify-content-between">
            <div class="col-lg-3 pb-5 userCard" style="min-width: 270px;">
                <!-- Photo -->
                <div class="author-card pb-3">
                    <div class="author-card-cover"></div>
                    <div class="author-card-profile">
                        <div class="author-card-avatar">
                            <img src="@userPhoto" alt="UserPhoto">
                        </div>
                        <div class="author-card-details">
                            <h5 class="author-card-name text-lg">@(Model.UserInfo.Name ?? "null")</h5>
                            <a class="sub-text" href="mailto:@Model.UserInfo.Email"> @Model.UserInfo.Email </a>
                        </div>
                    </div>
                </div>
                
                <!-- Sidebar-->
                <div class="wizard">
                    <nav class="list-group list-group-flush">
                        <a class="list-group-item active fs-15 no-hover-line" href="#menu-charts" data-toggle="pill">
                            <i class="fa fa-chart-pie fa-vc fa-fw"> </i> 题解统计
                        </a>
                        <a class="list-group-item fs-15 no-hover-line disabled" href="#menu-certificate" data-toggle="pill">
                            <i class="fa fa-certificate fa-vc fa-fw"> </i> 证书统计
                        </a>
                    </nav>
                </div>
            </div>

            <div class="col-lg-9 pb-5 tab-content">
                <!-- charts -->
                <div class="tab-pane fade show active" id="menu-charts">
                    @await Html.PartialAsync("_Charts")
                </div>

                <!-- certificates -->
                <div class="tab-pane fade" id="menu-certificate">
                </div>
            </div>
        </div>
    </div>
</div>
